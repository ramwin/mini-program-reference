**Xiang Wang @ 2018-09-26 11:30:52**


[返回小程序的文档](./README.md)

## [配置](https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html)
### 全局配置
* app.json
```
{
  "pages": [
    "pages/index/index",
    "pages/logs/index"
  ],
  "window": {
    "navigationBarTitleText": "Demo"
  },
  "tabBar": {
    "list": [{
      "pagePath": "pages/index/index",
      "text": "首页"
    }]
  },
  "networkTimeout": {
    "request": 10000,
    "downloadFile": 10000
  },
  "debug": true
}
```  

### 页面配置
仅仅会覆盖全局配置中的window中相同的配置项目
* backgroundColor: 窗口背景色
* enablePullDownRefresh: 开启下拉刷新
* [ ] navigationBarTitleText
* navigationStyle: default|custom 自定义导航栏
* [ ] backgroundColor

## 框架接口
* 页面
    * 页面事件处理函数
        * onShareAppMessage
        分享页面事件
        ```
        onShareAppMessage(res) {
            if (res.from == 'button') {  // button|menu 来自页面内转发
            }
            res.target // 如果是button，就代表了button哪个按钮，否则为undefined
            webViewUrl // 页面中包含web-view组件的时候，返回web-view的url
            return {
                "title":  
                "path": 
                imageUrl: // 图片路径，否则就是截图
            }
        }
        ````
    * Page.route
    [官网](https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#pageroute)
    获取当前页面的路径
    * Page.options
    获取当前页面的参数, 这个官网没文档，注意使用
    * [ ] Page.prototype.setData

## 开放能力
### 用户信息
* 获取手机号
不管结果如何errMsg都存在。但是如果拒绝了，就没有iv和encryptedData
```
bindgetphonenumber = getPhoneNumber(e) {
    e.detail.iv
    e.detail.errMsg
    e.detail.encryptedData
    if (e.detail.errMsg == 'getPhoneNumber:fail user deny') {
        throw Error("用户拒绝授权手机号")
    } else if (e.detail.errMsg == 'getPhoneNumber:ok') {
        console.info(e.detail.encryptedData);
        console.info(e.detail.iv);
    } else {
        throw Error(e.detail.errMsg)
    }
}
```
